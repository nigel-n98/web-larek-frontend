# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

---

## Архитектура проекта

### Базовые классы

#### `EventEmitter`
Класс обеспечивает событийную модель.  
Функции:
- подписка и отписка от событий (`on`, `off`);
- вызов слушателей при возникновении событий (`emit`);
- генерация колбэков-триггеров (`trigger`);
- возможность слушать все события (`onAll`);
  
Применяется для связи между различными частями приложения без жёсткой зависимости.

#### `AppState`
Служит хранилищем состояния приложения.  
Функции:
- хранит текущие товары в корзине;
- сохраняет информацию о заказе;
- уведомляет подписчиков при обновлении (`emit('basketUpdated')`, `emit('orderUpdated')`).

---

### Компоненты

#### `Card`
Компонент для отображения карточки товара. Используется на главной странице и в корзине.

#### `Modal`
Компонент модального окна. Используется для отображения форм, успешного заказа и т.п.

#### `Form`
Компонент формы заказа. Отвечает за сбор данных пользователя.

#### `Page`
Управляет отображением разных состояний страницы (каталог, корзина, оформление заказа, успешный заказ).

#### `Basket`
Компонент отображения списка выбранных товаров и их итоговой стоимости. Позволяет удалять товары.

#### `Order`
Компонент для ввода контактных и платёжных данных. Работает с формой и отправкой данных на сервер.

#### `Success`
Компонент для отображения финального экрана после успешного оформления заказа.

#### `WebLarekAPI`
Класс для общения с сервером по HTTP. Отвечает за загрузку списка товаров и отправку заказов.

---

### Взаимодействие компонентов

- Все компоненты не общаются напрямую, а взаимодействуют через **EventEmitter**.
- `AppState` уведомляет подписчиков об изменениях состояния.
- `Page` управляет тем, какие компоненты видны в текущий момент.
- Данные поступают от API (`LarekAPI`), сохраняются в `AppState`, после чего отображаются на странице через `Card`.

---

### Типы данных

- **IProduct**: тип описывает товар (id, title, price и т.д.).
- **IOrder**: контактные и платёжные данные пользователя.
- **TOrderInfo**: данные формы заказа.
- **FormErrors**: ошибки формы.
- **TBasket**:  статусы корзины.
- **TCategory**: категории товара.
- **TPayment**: способы оплаты